---
import BlogEditor from "@components/BlogEditor.astro";
import Layout from "@layouts/Layout.astro";
---

<Layout>
    
  <div class="mt-20">
    <BlogEditor id="new" />
</div>
</Layout>

<script>
    import { navigate } from "astro:transitions/client";
    const actions = {
        createBlog: async (_formData: any) => {
            // Mock implementation of createBlog
            return { data: { blogId: '123' }, error: null };
        }
    };
    const form = document.querySelector("#blog-form") as HTMLFormElement;
    form.addEventListener("submit",async (e) => {
        e.preventDefault();
        actions
        const formData = new FormData(e.target as HTMLFormElement);
        const { data, error } = await actions.createBlog(formData);
        
        if(data?.blogId){
            navigate(`/blogs/${data.blogId}`);
        }
      })
</script>
