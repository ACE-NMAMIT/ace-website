---
import DeveloperCard from '@components/DeveloperCard.astro';
import Layout from '@layouts/Layout.astro';
import { instagramLink } from '@lib/constants';

const developers = [
  { name: 'Varshith', description: 'All Hail Varshith', linkedinLink: '#', githubLink: '#' ,instagramLink:'#'},
  { name: 'Varshith', description: 'All Hail Varshith', linkedinLink: '#', githubLink: '#' ,instagramLink:'#'},
  { name: 'Varshith', description: 'All Hail Varshith', linkedinLink: '#', githubLink: '#' ,instagramLink:'#'},
  { name: 'Varshith', description: 'All Hail Varshith', linkedinLink: '#', githubLink: '#' ,instagramLink:'#'},
  { name: 'Varshith', description: 'All Hail Varshith', linkedinLink: '#', githubLink: '#' ,instagramLink:'#'},
  { name: 'Varshith', description: 'All Hail Varshith', linkedinLink: '#', githubLink: '#' ,instagramLink:'#'},
  { name: 'Varshith', description: 'All Hail Varshith', linkedinLink: '#', githubLink: '#' ,instagramLink:'#'},
  { name: 'Varshith', description: 'All Hail Varshith', linkedinLink: '#', githubLink: '#' ,instagramLink:'#'},
  

  
];
---

<Layout>
    <main class="content-container">
      <div id="tsparticles"></div>
      <div class="mt-32 flex flex-col gap-8 items-center">
        <h2 class="fade-up uppercase text-6xl text-center">Meet the dev team</h2>
        <div class="flex flex-wrap gap-32 justify-center">
          {
            developers.map((dev, index) => (
              <div class="item">
              <DeveloperCard
                name={dev.name}
                description={dev.description}
                linkedinLink={dev.linkedinLink}
                githubLink={dev.githubLink}
                instagramLink={dev.instagramLink}
              />
            </div>
          ))
        }
      </div>
    </div>
  </main>
</Layout>

<style>
  body {
      overflow-x: hidden;
    }
  #tsparticles {
    position: absolute;
    width: 100vw;
    height: 100vh;
    top: 0;
    left: 0;
    z-index: -1; /* Ensures particles are behind other content */
    }
  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(50px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .fade-up {
    opacity: 0;
    transform: translateY(50px);
    animation: slideUp 1s ease-out forwards;
  }
  #tsparticles canvas {
  filter: blur(7px);
}
</style>

<script>
  import gsap from 'gsap';
  import ScrollTrigger from 'gsap/src/ScrollTrigger';
  gsap.registerPlugin(ScrollTrigger);

  const cards = gsap.utils.toArray('.item') as HTMLDivElement[];

  cards.forEach((element, i) => {
    gsap.set(element, { opacity: 0 });
    gsap.from(element, {
      y: 200,
      scrollTrigger: {
        trigger: element,
        start: 'top 100%',
      },
    });
  });

  ScrollTrigger.batch('.item', {
    onEnter: (batch) => gsap.to(batch, { opacity: 1, y: 0, stagger: { each: 0.15, grid: [1, 3] }, overwrite: true }),
    onLeaveBack: (batch) => gsap.set(batch, { opacity: 0, y: 100, overwrite: true }),
  });

  ScrollTrigger.addEventListener('refreshInit', () => {
    gsap.set('.item', { y: 0 });
  });

  //@ts-ignore
  import { tsParticles } from 'https://cdn.jsdelivr.net/npm/@tsparticles/engine@3.1.0/+esm';
  //@ts-ignore
  import { loadAll } from 'https://cdn.jsdelivr.net/npm/@tsparticles/all@3.1.0/+esm';

  async function loadParticles(options: any) {
    await loadAll(tsParticles);

    await tsParticles.load({ id: 'tsparticles', options });
  }

  const fireflyConfig = {
  particles: {
    number: {
      value: 50, // More particles for fireflies
    },
    color: {
      value: "#FFFF", // Yellow, like fireflies
    },
    shape: {
      type: "circle",
    },
    opacity: {
      value: 0.8, // Slightly transparent
      random: true, // Flickering effect
      anim: {
        enable: true,
        speed: 1, // Speed of opacity changes
        opacity_min: 0.4,
        sync: false,
      },
    },
    size: {
      value: 3,
      random: true,
    },
    move: {
      enable: true,
      speed: 1, // Slow movement
      direction: "none",
      random: true,
      out_mode: "bounce", // Bounce off edges like fireflies
    },
  },
  background: {
    color: "#13151a", // Dark background
  },
};

loadParticles(fireflyConfig);
</script>

