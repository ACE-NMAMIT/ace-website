---
import { Icon } from 'astro-icon/components';
type Props = {
  blog: {
    id: number;
    title: string;
    content: string;
    description: string;
    createdAt: string;
    authorName: string;
    image: string;
    authorId: number;
  };
};

//dummy data
let liked: boolean | null = false;
let viewStats = {
  viewCount: 1,
  likeCount: 20,
};

let comments: any[] = [
  {
    content: 'This is a comment',
    name: 'John Doe',
    userId: 1,
    createdAt: '2022-01-01',
  },
  {
    content: 'This is a comment',
    name: 'Jane Smith',
    userId: 2,
    createdAt: '2022-01-01',
  },
];

const { blog }: Props = Astro.props;
---

<div class="mx-auto w-full max-w-screen-lg md:-mb-10 lg:-mb-12 xl:-mb-16 mt-16">
  <img src="/images/bg.jpg" alt="bg" class="min-h-[240px] w-full object-cover aspect-[16/7]" />
</div>

<div class="relative mx-auto max-w-4xl z-10 px-2 md:px-8">
  <div
    class="mx-auto md:space-y-12 max-w-full bg-[#13151a] py-8 md:px-4 lg:p-12 lg:py-16 xl:py-20 xl:px-16 flex flex-col justify-center items-center"
  >
    <section class="mx-auto w-full max-w-prose text-center flex justify-center items-center flex-col space-y-6">
      <time class="text-gray-300 text-2xl text-center">{blog.createdAt}</time>
      <h1 class="text-4xl font-bold text-center">{blog.title}</h1>

      <a href={`/profile/${blog.authorId}`} class="flex items-center gap-2 text-gray-300">
        <span>By</span>
        <div class="w-10 h-10 bg-gray-200 shrink-0 flex ring-primary rounded-full">
          <img src="/images/pic.jpg" class="object-cover w-full h-full rounded-full" width="600" height="600" />
        </div>
        {blog.authorName}
      </a>
    </section>

    <hr class="border-gray-700 w-full -mx-20" />
    <!-- <article class="prose min-w-full" set:html={blog.content} /> -->
    <!-- what type of content is this? -->
    <article class="min-w-full text-justify text-gray-400 leading-7">
      {blog.content}
    </article>
    <hr class="border-gray-700 w-full -mx-20" />
    <div class="flex gap-8 items-center mr-auto">
      <span class="text-center"
        ><Icon name="mdi:heart" size={20} class:list={'inline-block mr-2'} />{viewStats.viewCount}</span
      >
      <span class="text-center"
        ><Icon name="mdi:eye" size={20} class:list={'inline-block mr-2'} />{viewStats.viewCount}</span
      >
      <button class="text-center"
        ><Icon name="mdi:comment" size={20} class:list={'inline-block mr-2'} />{viewStats.viewCount}</button
      >
    </div>
    {
      comments.map((comment) => (
        <div class="w-full items-start justify-center gap-4">
          <a href={`profile/${comment.userId}`}>
            <div class="w-10 rounded-full">
              <img alt={comment.name} src="https://daisyui.com/images/stock/photo-1534528741775-53994a69daeb.jpg" />
            </div>
          </a>
          <div class="">
            <a href={`/profile/${comment.userId}`}>{comment.name}</a>
            <time class="text-xs">
              {new Intl.DateTimeFormat('en-US', {
                dateStyle: 'short',
                timeStyle: 'short',
              }).format(new Date(comment.createdAt))}
            </time>
          </div>
          <div class="">{comment.content}</div>
        </div>
      ))
    }
  </div>
</div>
